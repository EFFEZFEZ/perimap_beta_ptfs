<div id="dashboard-container">
    <main id="dashboard-main">

        <div id="dashboard-hall" class="view-is-active">
            
            <div class="hero-section">
                
                <!-- Titre accrocheur IDFM-style -->
                <div class="hero-headline">
                    <h1>Vos trajets dans le <span class="highlight">Grand Périgueux</span></h1>
                    <p class="hero-subtitle">Horaires, itinéraires et carte interactive du réseau Péribus</p>
                </div>
                
                <div class="planner-block-wrapper">
                    <div class="planner-block">
                        <div class="planner-title-bar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                            <h3>Où allons-nous ?</h3>
                        </div>
                        
                        <div class="planner-form">
                            <div class="planner-inputs">
                                
                                <div class="form-group has-geolocate">
                                    <label for="hall-planner-from">DÉPART (obligatoire)</label>
                                    <div class="input-with-action">
                                        <input type="text" id="hall-planner-from" placeholder="Gare, station, arrêt ou lieu" autocomplete="off">
                                        <button class="btn-icon-round btn-geolocate" id="hall-geolocate-btn" aria-label="Utiliser ma position" disabled>
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                                <circle cx="12" cy="12" r="3" />
                                                <path d="M12 5V2" />
                                                <path d="M12 22v-3" />
                                                <path d="M5 12H2" />
                                                <path d="M22 12h-3" />
                                                <path d="m17 7 2-2" />
                                                <path d="m7 7-2-2" />
                                                <path d="m7 17-2 2" />
                                                <path d="m17 17 2 2" />
                                            </svg>
                                        </button>
                                    </div>
                                    <div id="from-suggestions" class="autocomplete-suggestions"></div>
                                </div>

                                <div class="swap-button-slot">
                                    <button class="btn-swap-direction" id="hall-btn-swap-direction" aria-label="Inverser le départ et l'arrivée">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 2.1l4 4-4 4"/><path d="M3 12.6v-2.6c0-1.1.9-2 2-2h16"/><path d="M7 21.9l-4-4 4-4"/><path d="M21 11.4v2.6c0 1.1-.9 2-2 2H3"/></svg>
                                    </button>
                                </div>

                                <div class="form-group">
                                    <label for="hall-planner-to">ARRIVÉE (obligatoire)</label>
                                    <div class="input-with-action">
                                        <input type="text" id="hall-planner-to" placeholder="Gare, station, arrêt ou lieu" autocomplete="off">
                                    </div>
                                    <div id="to-suggestions" class="autocomplete-suggestions"></div>
                                </div>

                            </div>

                            <div class="form-group-when">
                                <label for="planner-when-btn">QUAND</label>
                                <button id="planner-when-btn" class="btn-when">
                                    <span>Partir maintenant</span>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>
                                </button>
                                
                                <div id="planner-options-popover" class="hidden">
                                    <div class="popover-tabs">
                                        <button class="popover-tab active" data-tab="partir">Partir</button>
                                        <button class="popover-tab" data-tab="arriver">Arriver</button>
                                    </div>
                                    
                                    <div class="popover-content">
                                        <div class="form-group">
                                            <label for="popover-date">DATE DU TRAJET</label>
                                            <select id="popover-date" class="real-select"></select>
                                        </div>
                                        <div class="popover-time-inputs">
                                            <div class="form-group">
                                                <label for="popover-hour">HEURE</label>
                                                <select id="popover-hour" class="real-select"></select>
                                            </div>
                                            <div class="form-group">
                                                <label for="popover-minute">MINUTES</label>
                                                <select id="popover-minute" class="real-select"></select>
                                            </div>
                                        </div>
                                        <button id="popover-submit-btn" class="btn btn-primary btn-popover-submit">Partir maintenant</button>
                                    </div>
                                    </div>
                            </div>
                            
                            <button id="planner-submit-btn" class="btn btn-primary planner-search-btn">Rechercher</button>
                        </div>
                    </div>
                </div>

            </div>
            
            <!-- Services Cards - Style IDFM -->
            <div class="services-section">
                <h2 class="section-title">Nos services</h2>
                <div class="services-grid">
                    <button class="service-card" data-view="horaires">
                        <div class="service-card-icon service-card-icon--green">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                        </div>
                        <div class="service-card-content">
                            <h3>Horaires & Lignes</h3>
                            <p>Consultez les horaires de passage et téléchargez les fiches horaires de toutes les lignes</p>
                        </div>
                        <svg class="service-card-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                    
                    <button class="service-card" data-view="info-trafic">
                        <div class="service-card-icon service-card-icon--orange">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                        </div>
                        <div class="service-card-content">
                            <h3>État du Réseau</h3>
                            <p>Suivez en temps réel les perturbations, retards et travaux sur le réseau Péribus</p>
                        </div>
                        <span id="info-trafic-count" class="notification-badge hidden">0</span>
                        <svg class="service-card-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                    
                    <button id="btn-show-map" class="service-card">
                        <div class="service-card-icon service-card-icon--blue">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>
                        </div>
                        <div class="service-card-content">
                            <h3>Carte Interactive</h3>
                            <p>Explorez le réseau sur la carte, localisez les arrêts et suivez les bus en direct</p>
                        </div>
                        <svg class="service-card-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                </div>
            </div>
            
            <!-- Bannière promotionnelle -->
            <div class="promo-banner">
                <div class="promo-banner-content">
                    <div class="promo-banner-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    </div>
                    <div class="promo-banner-text">
                        <strong>Nouveau sur le réseau ?</strong>
                        <span>Téléchargez le plan complet des lignes Péribus pour préparer vos trajets.</span>
                    </div>
                    <a href="/data/fichehoraire/grandperigueux_peribus_plan_reseau_bus_.pdf" target="_blank" rel="noopener noreferrer" class="promo-banner-btn">
                        Télécharger
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v13m-7-7l7 7 7-7"/></svg>
                    </a>
                </div>
            </div>
            
            <!-- Widget des retards en temps réel -->
            <div id="network-delays-widget" class="network-delays-widget hidden">
                <div class="network-delays-header">
                    <span class="warning-icon">⚠️</span>
                    <span>Retards signalés sur le réseau</span>
                </div>
                <div id="network-delays-list" class="network-delays-list">
                    <!-- Les retards seront injectés ici dynamiquement -->
                </div>
            </div>
            
            <!-- Chiffres clés -->
            <div class="stats-section">
                <div class="stats-card">
                    <div class="stats-header">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        <h3>Le réseau Péribus en chiffres</h3>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number">36</span>
                            <span class="stat-label">Lignes</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">222</span>
                            <span class="stat-label">km de lignes</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">2.1M</span>
                            <span class="stat-label">Voyageurs/an</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">43</span>
                            <span class="stat-label">Communes</span>
                        </div>
                    </div>
                </div>
            </div>

        </div> 
        
        <div id="dashboard-content-view">
            <button id="btn-back-to-hall" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                <span>Retour au menu</span>
            </button>

            <div class="content-cards">
                
                <!-- Horaires and trafic cards injected separately -->

            </div> 
        </div> 
    </main>
</div>

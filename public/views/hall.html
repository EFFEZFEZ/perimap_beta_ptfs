<div id="dashboard-container">
    <!-- Bandeau d'alerte trafic intégré -->
    <div id="alert-banner" class="hidden">
        <div id="alert-banner-content"></div>
        <button id="alert-banner-close" aria-label="Fermer l'alerte">&times;</button>
    </div>

    <main id="dashboard-main">

        <div id="dashboard-hall" class="view-is-active">
            
            <!-- Hero avec image de fond Périgueux -->
            <div class="hero-backdrop">
                <div class="hero-overlay"></div>
            </div>
            
            <!-- Widget de recherche flottant -->
            <div class="planner-section">
                <div class="planner-block">
                    <h2 class="planner-title">Rechercher un itinéraire</h2>
                    
                    <div class="planner-form">
                        <div class="planner-inputs-vertical">
                            
                            <div class="form-group has-geolocate">
                                <div class="input-with-action input-with-icon">
                                    <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2v4"/><path d="M12 18v4"/><path d="M4.93 4.93l2.83 2.83"/><path d="M16.24 16.24l2.83 2.83"/><path d="M2 12h4"/><path d="M18 12h4"/><path d="M4.93 19.07l2.83-2.83"/><path d="M16.24 7.76l2.83-2.83"/></svg>
                                    <input type="text" id="hall-planner-from" placeholder="Arrêt ou adresse de départ" autocomplete="off">
                                    <button class="btn-icon-round btn-geolocate" id="hall-geolocate-btn" aria-label="Utiliser ma position" disabled>
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                            <circle cx="12" cy="10" r="3"/>
                                        </svg>
                                    </button>
                                </div>
                                <div id="from-suggestions" class="autocomplete-suggestions"></div>
                            </div>

                            <div class="swap-button-row">
                                <div class="swap-line"></div>
                                <button class="btn-swap-direction" id="hall-btn-swap-direction" aria-label="Inverser le départ et l'arrivée">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16V4m0 0L3 8m4-4l4 4m6 4v12m0 0l4-4m-4 4l-4-4"/></svg>
                                </button>
                                <div class="swap-line"></div>
                            </div>

                            <div class="form-group">
                                <div class="input-with-action input-with-icon">
                                    <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                                    <input type="text" id="hall-planner-to" placeholder="Arrêt ou adresse d'arrivée" autocomplete="off">
                                </div>
                                <div id="to-suggestions" class="autocomplete-suggestions"></div>
                            </div>

                        </div>

                        <div class="planner-options">
                            <button id="planner-when-btn" class="btn-when">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                <span>Partir maintenant</span>
                                <svg class="chevron" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>
                            </button>
                            
                            <div id="planner-options-popover" class="hidden">
                                <div class="popover-tabs">
                                    <button class="popover-tab active" data-tab="partir">Partir à</button>
                                    <button class="popover-tab" data-tab="arriver">Arriver à</button>
                                </div>
                                
                                <div class="popover-content">
                                    <div class="form-group">
                                        <label for="popover-date">Date</label>
                                        <select id="popover-date" class="real-select"></select>
                                    </div>
                                    <div class="popover-time-inputs">
                                        <div class="form-group">
                                            <label for="popover-hour">Heure</label>
                                            <select id="popover-hour" class="real-select"></select>
                                        </div>
                                        <span class="time-separator">:</span>
                                        <div class="form-group">
                                            <label for="popover-minute">Min</label>
                                            <select id="popover-minute" class="real-select"></select>
                                        </div>
                                    </div>
                                    <button id="popover-submit-btn" class="btn btn-primary btn-popover-submit">Valider</button>
                                </div>
                            </div>
                        </div>
                        
                        <button id="planner-submit-btn" class="btn btn-primary planner-search-btn">Rechercher</button>
                    </div>
                </div>
            </div>
            
            <!-- Widget des retards en temps réel -->
            <div id="network-delays-widget" class="network-delays-widget hidden">
                <div class="network-delays-header">
                    <span class="warning-icon">⚠️</span>
                    <span>Retards signalés sur le réseau</span>
                </div>
                <div id="network-delays-list" class="network-delays-list"></div>
            </div>
            
            <!-- Actions rapides -->
            <div class="quick-actions-section">
                <button id="btn-show-map" class="quick-action-card">
                    <div class="quick-action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>
                    </div>
                    <span>Voir la carte</span>
                </button>
                <a href="#horaires" class="quick-action-card">
                    <div class="quick-action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    </div>
                    <span>Horaires</span>
                </a>
                <a href="#trafic" class="quick-action-card">
                    <div class="quick-action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    </div>
                    <span>Info trafic</span>
                </a>
            </div>

            <!-- Bandeau Actualités / État du trafic -->
            <div class="news-banner">
                <div class="news-banner-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                </div>
                <div class="news-banner-content">
                    <span class="news-banner-label">Actualités</span>
                    <span class="news-banner-text">Trafic normal sur l'ensemble du réseau Péribus</span>
                </div>
                <a href="#trafic" class="news-banner-link">Voir</a>
            </div>

        </div> 
        
        <div id="dashboard-content-view">
            <button id="btn-back-to-hall" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                <span>Retour au menu</span>
            </button>

            <div class="content-cards"></div> 
        </div> 
    </main>
</div>

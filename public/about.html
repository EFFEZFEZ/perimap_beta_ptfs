<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>√Ä propos ¬∑ P√©riMap</title>
    <meta name="description" content="En savoir plus sur P√©riMap, application ind√©pendante fond√©e sur les donn√©es ouvertes du r√©seau P√©ribus.">
    <link rel="canonical" href="https://perimap.app/about.html">
    <link rel="icon" type="image/webp" sizes="192x192" href="https://i.ibb.co/1f0pp0Tc/Peribus-Icon.webp">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="about-page">
    <header id="main-header" class="about-header">
        <div class="header-content about-header-content">
            <div class="header-left">
                <a href="/" class="btn btn-secondary about-back-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                    <span>Menu</span>
                </a>
                <div class="logo">
                    <img src="https://i.ibb.co/0jJhLPp8/Peribus.webp" alt="Logo P√©ribus" class="header-logo-img">
                    <div class="header-title-group">
                        <span class="brand-name">P√©riMap</span>
                        <span class="brand-sub">Compagnon mobilit√©</span>
                    </div>
                </div>
            </div>
            <nav class="header-nav">
                <button id="theme-toggle-btn" class="btn-icon-round" aria-label="Basculer th√®me" aria-pressed="false">
                    <span id="theme-toggle-icon">üåô</span>
                </button>
            </nav>
        </div>
    </header>
    <main class="about-main">
        <section class="about-card hero-card fade-in">
            <div class="hero-badge">Open data ‚Ä¢ PWA</div>
            <h1>P√©riMap simplifie vos trajets P√©ribus.</h1>
            <p class="hero-lede">Une web app l√©g√®re, align√©e sur le r√©seau du Grand P√©rigueux, qui mixe donn√©es officielles et moteur Google pour offrir un guidage clair et agr√©able.</p>
            <div class="about-meta-grid">
                <article>
                    <h3>Donn√©es fiables</h3>
                    <p>Horaires GTFS officiels + enrichissements Google Maps pour combler les manques.</p>
                </article>
                <article>
                    <h3>Transparence</h3>
                    <p>Projet non affili√©, mention ODbL affich√©e et base d√©riv√©e disponible.</p>
                </article>
                <article>
                    <h3>Usage libre</h3>
                    <p>Aucune pub, aucun tracking ‚Äì juste un compagnon pens√© pour les usagers.</p>
                </article>
            </div>
            <a class="hero-link" href="https://github.com/EFFEZFEZ/p-rimap-sans-api-" target="_blank" rel="noopener">Voir le code source ‚Üí</a>
        </section>

        <section class="about-card info-card fade-in">
            <h2>Ce qui fait la diff√©rence</h2>
            <ul class="info-list">
                <li><strong>Cartes √©l√©gantes.</strong> Itin√©raires multi-modes, polylines GTFS, marqueurs velours.</li>
                <li><strong>Chronos r√©alistes.</strong> Calculs porte-√†-porte avec marche estim√©e et correspondances.</li>
                <li><strong>Respect des donn√©es.</strong> Attribution claire, base <code>gtfs.bundle.json</code> r√©utilisable.</li>
            </ul>
        </section>

        <section class="about-card install-section fade-in">
            <div class="install-heading">
                <h2>Installer P√©riMap</h2>
                <p class="install-blurb">Pensez √† ajouter P√©riMap √† votre √©cran d'accueil üòâ √ßa ne prend aucune place !</p>
            </div>
            <p id="install-helper" class="install-helper"></p>
            <button id="install-pwa-btn" class="install-btn" disabled>Installer P√©riMap</button>
        </section>
    </main>

    <footer id="legal-strip">
        <div class="legal-strip-content">
            <span class="legal-pill">Application ind√©pendante, non affili√©e au Grand P√©rigueux.</span>
            <span>Donn√©es ¬© Grand P√©rigueux / P√©ribus ‚Äî licence ODbL.</span>
            <span>
                Base d√©riv√©e <code>gtfs.bundle.json</code> partag√©e sur
                <a href="https://github.com/EFFEZFEZ/p-rimap-sans-api-/tree/main/public/data/gtfs" target="_blank" rel="noopener">GitHub</a>.
            </span>
            <a class="legal-about-btn" href="/about.html">√Ä propos</a>
        </div>
    </footer>

    <script>
    (function themeSetup() {
        const body = document.body;
        const toggle = document.getElementById('theme-toggle-btn');
        if (!toggle) return;
        const icon = document.getElementById('theme-toggle-icon');
        const applyTheme = (isDark) => {
            body.classList.toggle('dark-theme', isDark);
            toggle?.setAttribute('aria-pressed', String(isDark));
            if (icon) icon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        };
        let saved = null;
        try { saved = localStorage.getItem('ui-theme'); } catch (_) {}
        const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        applyTheme(saved ? saved === 'dark' : prefers);
        toggle?.addEventListener('click', () => {
            const next = !body.classList.contains('dark-theme');
            applyTheme(next);
            try { localStorage.setItem('ui-theme', next ? 'dark' : 'light'); } catch (_) {}
        });
    })();

    (function installCTA() {
        const installBtn = document.getElementById('install-pwa-btn');
        if (!installBtn) return;
        const helper = document.getElementById('install-helper');
        const ua = navigator.userAgent.toLowerCase();
        const isIOS = /iphone|ipad|ipod/.test(ua);
        const isAndroid = !isIOS && ua.includes('android');
        let deferredPrompt = null;

        const setHelper = (text) => { if (helper) helper.textContent = text; };

        if (isAndroid) {
            setHelper('Android d√©tect√© : si le bouton reste gris√©, utilisez le menu ‚ãÆ ‚ñ∏ Ajouter √† l\'√©cran d\'accueil.');
        } else if (!isIOS) {
            setHelper('Depuis un navigateur compatible (Chrome, Edge), cliquez sur Installer pour l\'ancrer √† l\'accueil.');
        }

        if (isIOS) {
            installBtn.disabled = false;
            installBtn.textContent = 'Guide iOS';
            setHelper('iOS d√©tect√© : ouvrez le menu Partager ‚ñ∏ Sur l\'√©cran d\'accueil.');
            installBtn.addEventListener('click', () => {
                alert('Sur iOS : ouvrez Safari ‚ñ∏ Partager ‚ñ∏ Sur l\'√©cran d\'accueil.');
            });
            return;
        }

        window.addEventListener('beforeinstallprompt', (event) => {
            event.preventDefault();
            deferredPrompt = event;
            installBtn.disabled = false;
            installBtn.textContent = 'Installer P√©riMap';
            setHelper(isAndroid ? 'Android d√©tect√© : appuyez sur Installer ou utilisez le menu ‚ãÆ.' : 'Compatible navigateurs Chrome/Edge : utilisez le bouton Installer.');
        });

        installBtn.addEventListener('click', async () => {
            if (!deferredPrompt) {
                setHelper('Installation non disponible sur ce navigateur.');
                return;
            }
            installBtn.disabled = true;
            installBtn.textContent = 'Demande envoy√©e‚Ä¶';
            deferredPrompt.prompt();
            const choice = await deferredPrompt.userChoice;
            setHelper(choice.outcome === 'accepted' ? 'Installation en cours sur votre √©cran d\'accueil.' : 'Installation annul√©e.');
            deferredPrompt = null;
        });
    })();
    </script>
</body>
</html>
